{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Build P1",
      "command": "bash",
      "args": [
        "../wrapped_make.sh",
        "APP=brewblox",
        "PLATFORM=p1"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build Photon",
      "command": "bash",
      "args": [
        "../wrapped_make.sh",
        "APP=brewblox",
        "PLATFORM=photon"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build GCC",
      "command": "bash",
      "args": [
        "../wrapped_make.sh",
        "APP=brewblox",
        "PLATFORM=gcc"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build ESP",
      "command": "bash",
      "args": [
        "build/idf.sh",
        "build"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build and run tests",
      "command": "bash",
      "args": [
        "build/build-and-run-tests.sh"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Trigger DFU",
      "command": "python3",
      "args": [
        "build/trigger-dfu.py"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "Flash P1",
      "command": "bash",
      "args": [
        "../wrapped_make.sh",
        "APP=brewblox",
        "PLATFORM=p1",
        "all",
        "program-dfu"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc",
      "dependsOn": [
        "Trigger DFU"
      ]
    },
    {
      "label": "Flash Photon",
      "command": "bash",
      "args": [
        "../wrapped_make.sh",
        "APP=brewblox",
        "PLATFORM=photon",
        "all",
        "program-dfu"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc",
      "dependsOn": [
        "Trigger DFU"
      ]
    },
    {
      "label": "Flash ESP",
      "command": "bash",
      "args": [
        "idf.sh",
        "flash"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Touch GCC",
      "type": "shell",
      "command": "touch",
      "args": [
        "device_key.der",
        "server_key.der",
        "eeprom.bin"
      ],
      "options": {
        "cwd": "${workspaceFolder}/build/target/brewblox-gcc"
      },
      "presentation": {
        "echo": false,
        "reveal": "never",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      }
    },
    {
      "label": "Build and touch GCC",
      "dependsOn": [
        "Build GCC",
        "Touch GCC"
      ]
    },
    {
      "label": "Compile proto",
      "type": "shell",
      "command": "bash",
      "args": [
        "build/compile-proto.sh"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": []
    },
    {
      "label": "Build app tests",
      "type": "shell",
      "command": "bash",
      "args": [
        "wrapped_make.sh",
        "-C",
        "app/brewblox-particle/test"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build lib tests",
      "type": "shell",
      "command": "bash",
      "args": [
        "wrapped_make.sh",
        "-C",
        "lib/test"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build controlbox tests",
      "type": "shell",
      "command": "bash",
      "args": [
        "wrapped_make.sh",
        "-C",
        "controlbox"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Clean all",
      "type": "shell",
      "command": "bash",
      "args": [
        "build/clean-all.sh"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": "$gcc"
    },
    {
      "label": "Build P1 SWD",
      "command": "bash",
      "args": [
        "../wrapped_make.sh",
        "APP=brewblox",
        "PLATFORM=p1",
        "USE_SWD=y",
        "program-dfu"
      ],
      "group": "build",
      "options": {
        "cwd": "${workspaceFolder}/build"
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": "$gcc"
    }
  ]
}